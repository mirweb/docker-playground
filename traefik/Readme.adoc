= Traefik 

== Quick start

.simple docker-compose.yml
[source,yml]
----
include::docker-compose.yml[lines=1..16]
----

- starting traefik

    docker-compose up -d reverse-proxy

- adding simple http service whoami to docker-compose file

.whoami service definition
[source,yml]
----
include::docker-compose.yml[lines=21..25]
----

- starting whoami 

    docker-compose -d up whoami

- starting two instances of service whoami

    docker-compose -d --scale whoami=2

- access via http://localhost/whoami

== file configuration provider

.addtional configuration as volume definition in docker-compose.yml
[source,yml]
----
include::docker-compose.yml[lines=19]
----

== including tsl config

Infos:

- https://www.andrewdixon.co.uk/2020/03/14/using-https-certificates-with-traefik-and-docker-for-a-development-environment/[Using HTTPS certificates with Traefik and Docker for a development environment]

- generating key, previously fill config file 

    openssl req -new -sha256 -nodes -out traefik.csr -newkey rsa:2048 -keyout traefik.key -config traefik.ext

- signing csr and generating crt

    openssl x509 -req -in traefik.csr -CA ~/myCA/myCA.pem -CAkey ~/myCA/myCA.key -CAcreateserial -out traefik.crt -days 365 -sha256

.generating extra (importand!) file to include tls configuration eg default-cert.yml
[source,yml]
----
include::example/default-cert.yml[]
----

